---
name: "009-内容生成前端界面"
description: "开发内容生成的前端界面，包括AI内容生成、内容编辑、风格控制和批量生成功能"
status: "pending"
priority: "high"
assigned_to: ""
labels: ["frontend", "content-generation", "ai", "ui"]
type: "task"
epic: "aiwriter-implementation"
story_points: 13
created: "2025-09-04T01:26:29Z"
updated: "2025-09-04T01:26:29Z"
due_date: ""
blocked_by: ["001", "002", "003", "006", "007", "008"]
blocking: ["010"]
---

# 任务：内容生成前端界面

## 任务描述

开发内容生成模块的前端界面，实现基于选题的AI内容生成、实时内容编辑、风格和长度控制、批量内容生成等功能，为用户提供高效的内容创作工具。

## 任务目标

- [ ] 创建内容生成主界面
- [ ] 实现AI内容生成功能
- [ ] 开发内容编辑器组件
- [ ] 实现风格和长度控制
- [ ] 添加批量内容生成功能
- [ ] 实现内容预览和比较
- [ ] 添加内容保存和管理
- [ ] 实现响应式设计

## 详细步骤

### 1. 内容生成主界面
- [ ] 创建内容生成页面组件 (`ContentGenerationPage`)
- [ ] 设计界面布局：选题选择区 + 生成控制区 + 内容编辑区
- [ ] 实现页面路由配置
- [ ] 添加面包屑导航和页面标题

### 2. 选题选择功能
- [ ] 创建选题选择组件 (`TopicSelector`)
- [ ] 实现选题列表展示
- [ ] 添加选题搜索和筛选功能
- [ ] 实现选题详情预览
- [ ] 添加选题快速切换

### 3. AI内容生成
- [ ] 创建内容生成组件 (`ContentGenerator`)
- [ ] 实现生成参数设置（风格、长度、语气）
- [ ] 添加生成进度显示
- [ ] 实现实时生成状态更新
- [ ] 添加生成历史记录

### 4. 内容编辑器组件
- [ ] 创建富文本编辑器组件 (`RichTextEditor`)
- [ ] 实现格式化工具栏
- [ ] 添加插入图片、链接等功能
- [ ] 实现自动保存功能
- [ ] 添加字数统计和阅读时间

### 5. 风格控制功能
- [ ] 创建风格控制组件 (`StyleController`)
- [ ] 实现写作风格选择（正式、轻松、专业等）
- [ ] 添加语气调节功能
- [ ] 实现目标读者设置
- [ ] 添加风格预览功能

### 6. 长度控制功能
- [ ] 创建长度控制组件 (`LengthController`)
- [ ] 实现字数目标设置
- [ ] 添加长度建议和提示
- [ ] 实现内容结构规划
- [ ] 添加章节分割功能

### 7. 批量生成功能
- [ ] 创建批量生成组件 (`BatchGenerator`)
- [ ] 实现多选题批量生成
- [ ] 添加批量参数设置
- [ ] 实现生成队列管理
- [ ] 添加批量进度显示

### 8. 内容预览和比较
- [ ] 创建内容预览组件 (`ContentPreview`)
- [ ] 实现多版本对比功能
- [ ] 添加差异高亮显示
- [ ] 实现版本选择和切换
- [ ] 添加预览模式切换

### 9. 内容保存功能
- [ ] 创建内容保存组件 (`ContentSaver`)
- [ ] 实现草稿保存功能
- [ ] 添加版本管理功能
- [ ] 实现自动保存和手动保存
- [ ] 添加保存状态提示

### 10. 内容管理功能
- [ ] 创建内容管理组件 (`ContentManager`)
- [ ] 实现内容列表展示
- [ ] 添加内容搜索和筛选
- [ ] 实现内容分类管理
- [ ] 添加内容统计信息

## 验收标准

### 功能性验收
- [ ] 可以基于选题成功生成内容
- [ ] 内容编辑功能完整可用
- [ ] 风格和长度控制正常工作
- [ ] 批量生成功能稳定可靠
- [ ] 内容预览和比较功能正常
- [ ] 保存和管理功能完善
- [ ] 版本管理功能可用

### 用户体验验收
- [ ] AI生成响应时间 < 60秒
- [ ] 编辑器响应流畅
- [ ] 界面操作直观易用
- [ ] 状态反馈及时清晰
- [ ] 移动端体验良好

### 技术性验收
- [ ] AI API调用稳定可靠
- [ ] 编辑器性能优化良好
- [ ] 数据同步逻辑正确
- [ ] 错误处理完善
- [ ] 单元测试覆盖率 > 80%

## 技术要求

### 前端技术栈
- **框架**: React 18+ with TypeScript
- **状态管理**: Zustand
- **UI组件**: Ant Design
- **样式**: Tailwind CSS
- **富文本编辑器**: React Quill 或 Draft.js
- **AI集成**: Google Gemini API

### 组件结构
```
src/
├── pages/
│   └── ContentGenerationPage.tsx
├── components/
│   ├── content/
│   │   ├── TopicSelector.tsx
│   │   ├── ContentGenerator.tsx
│   │   ├── RichTextEditor.tsx
│   │   ├── StyleController.tsx
│   │   ├── LengthController.tsx
│   │   ├── BatchGenerator.tsx
│   │   ├── ContentPreview.tsx
│   │   ├── ContentSaver.tsx
│   │   └── ContentManager.tsx
│   └── common/
│       ├── WordCounter.tsx
│       ├── AutoSaveIndicator.tsx
│       └── VersionSwitcher.tsx
└── hooks/
    ├── useContentGeneration.ts
    ├── useContentEditor.ts
    └── useAutoSave.ts
```

### 数据模型
```typescript
interface ContentFormData {
  title: string;
  body: string;
  style: 'formal' | 'casual' | 'professional' | 'creative';
  tone: 'neutral' | 'friendly' | 'authoritative' | 'humorous';
  targetLength: number;
  targetAudience: string;
}

interface ContentDisplayData extends ContentFormData {
  id: string;
  topicId: string;
  accountId: string;
  status: 'draft' | 'generating' | 'generated' | 'editing' | 'saved';
  actualLength: number;
  readingTime: number;
  createdAt: string;
  updatedAt: string;
  versions: ContentVersion[];
}

interface ContentVersion {
  id: string;
  title: string;
  body: string;
  createdAt: string;
  version: number;
  comment?: string;
}
```

## API集成

### 必需的API端点
- `POST /api/content/generate` - 生成内容
- `GET /api/content` - 获取内容列表
- `GET /api/content/:id` - 获取内容详情
- `PUT /api/content/:id` - 更新内容
- `POST /api/content/:id/save` - 保存内容
- `GET /api/content/:id/versions` - 获取版本历史
- `POST /api/content/batch-generate` - 批量生成内容

### AI集成API
- `POST /api/ai/generate-content` - 基于选题生成内容
- `POST /api/ai/optimize-content` - 优化生成内容
- `POST /api/ai/continue-writing` - 继续写作
- `POST /api/ai/rewrite-section` - 重写指定段落

## 风险评估

### 技术风险
- **AI生成质量**: 实现质量控制和人工审核
- **大量文本处理**: 优化编辑器性能
- **实时同步**: 实现稳定的数据同步机制

### 缓解措施
- 实现内容生成前的参数验证
- 添加内容质量评估功能
- 实现本地缓存和离线编辑
- 提供生成失败的重试机制

## 预估工作量
- **设计时间**: 8小时
- **开发时间**: 28小时
- **测试时间**: 8小时
- **总计**: 44小时

## 相关资源
- [React Quill富文本编辑器](https://quilljs.com/)
- [Google Gemini API文档](https://ai.google.dev/)
- [Ant Design表单组件](https://ant.design/components/form/)
- [React性能优化指南](https://react.dev/learn/render-and-commit)

## 备注
- 考虑添加内容模板功能
- 预留内容协作编辑功能接口
- 实现内容的多格式导出功能
- 添加内容效果分析和优化建议