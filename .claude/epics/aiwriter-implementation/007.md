---
name: "007-素材管理前端组件"
description: "开发素材管理的前端组件，包括文本输入、文件上传、素材分类和标签管理功能"
status: "pending"
priority: "high"
assigned_to: ""
labels: ["frontend", "material-management", "ui"]
type: "task"
epic: "aiwriter-implementation"
story_points: 13
created: "2025-09-04T01:26:29Z"
updated: "2025-09-04T01:26:29Z"
due_date: ""
blocked_by: ["001", "002", "003", "006"]
blocking: ["008", "009", "010"]
---

# 任务：素材管理前端组件

## 任务描述

开发素材管理模块的前端组件，实现文本素材输入、文件上传解析、素材分类标签管理、搜索筛选等功能，为内容创作提供完整的素材管理解决方案。

## 任务目标

- [ ] 创建素材管理主界面
- [ ] 实现文本素材输入和编辑功能
- [ ] 开发文件上传和解析组件
- [ ] 实现素材分类和标签管理
- [ ] 添加素材搜索和筛选功能
- [ ] 实现素材预览和编辑功能
- [ ] 添加素材版本管理
- [ ] 实现响应式设计

## 详细步骤

### 1. 素材管理主界面
- [ ] 创建素材管理页面组件 (`MaterialManagementPage`)
- [ ] 设计界面布局：工具栏 + 素材列表 + 预览区域
- [ ] 实现页面路由配置
- [ ] 添加面包屑导航和页面标题

### 2. 文本素材输入组件
- [ ] 创建文本输入组件 (`TextInput`)
- [ ] 实现富文本编辑器功能
- [ ] 添加字数统计和格式化工具
- [ ] 实现自动保存功能
- [ ] 添加Markdown支持

### 3. 文件上传组件
- [ ] 创建文件上传组件 (`FileUpload`)
- [ ] 实现拖拽上传功能
- [ ] 支持多种文件格式（PDF、Word、TXT）
- [ ] 添加文件大小限制和类型验证
- [ ] 实现上传进度显示

### 4. 文件解析功能
- [ ] 创建文件解析组件 (`FileParser`)
- [ ] 实现PDF文本提取
- [ ] 实现Word文档解析
- [ ] 添加解析进度显示
- [ ] 实现解析结果预览

### 5. 素材分类管理
- [ ] 创建分类管理组件 (`CategoryManager`)
- [ ] 实现分类的创建、编辑、删除
- [ ] 添加分类图标和颜色设置
- [ ] 实现分类层级结构
- [ ] 添加分类统计信息

### 6. 标签管理功能
- [ ] 创建标签管理组件 (`TagManager`)
- [ ] 实现标签的添加、删除、编辑
- [ ] 添加标签颜色和图标
- [ ] 实现标签搜索和筛选
- [ ] 添加标签使用统计

### 7. 素材列表展示
- [ ] 创建素材列表组件 (`MaterialList`)
- [ ] 实现网格和列表两种视图模式
- [ ] 添加素材卡片显示
- [ ] 实现排序功能（时间、名称、类型）
- [ ] 添加批量操作功能

### 8. 搜索和筛选功能
- [ ] 创建搜索筛选组件 (`SearchFilter`)
- [ ] 实现关键词搜索
- [ ] 添加分类筛选
- [ ] 实现标签筛选
- [ ] 添加日期范围筛选

### 9. 素材预览和编辑
- [ ] 创建素材预览组件 (`MaterialPreview`)
- [ ] 实现不同格式素材的预览
- [ ] 添加快速编辑功能
- [ ] 实现全屏编辑模式
- [ ] 添加版本历史查看

### 10. 版本管理功能
- [ ] 创建版本管理组件 (`VersionManager`)
- [ ] 实现素材版本历史
- [ ] 添加版本比较功能
- [ ] 实现版本回滚
- [ ] 添加版本备注功能

## 验收标准

### 功能性验收
- [ ] 可以成功创建文本素材
- [ ] 可以上传并解析文件素材
- [ ] 可以管理素材分类和标签
- [ ] 搜索和筛选功能正常工作
- [ ] 可以预览和编辑素材
- [ ] 版本管理功能完整
- [ ] 批量操作功能正常

### 用户体验验收
- [ ] 界面响应时间 < 1秒
- [ ] 文件上传有进度显示
- [ ] 操作反馈及时清晰
- [ ] 界面布局合理直观
- [ ] 移动端体验良好

### 技术性验收
- [ ] 组件结构清晰，可复用性强
- [ ] 状态管理逻辑正确
- [ ] 文件上传稳定可靠
- [ ] 错误处理完善
- [ ] 单元测试覆盖率 > 80%

## 技术要求

### 前端技术栈
- **框架**: React 18+ with TypeScript
- **状态管理**: Zustand
- **UI组件**: Ant Design
- **样式**: Tailwind CSS
- **富文本**: React Quill 或 Draft.js
- **文件处理**: 适合的文件解析库

### 组件结构
```
src/
├── pages/
│   └── MaterialManagementPage.tsx
├── components/
│   ├── materials/
│   │   ├── TextInput.tsx
│   │   ├── FileUpload.tsx
│   │   ├── FileParser.tsx
│   │   ├── CategoryManager.tsx
│   │   ├── TagManager.tsx
│   │   ├── MaterialList.tsx
│   │   ├── SearchFilter.tsx
│   │   ├── MaterialPreview.tsx
│   │   └── VersionManager.tsx
│   └── common/
│       ├── RichTextEditor.tsx
│       └── DragDropZone.tsx
└── hooks/
    ├── useMaterialManagement.ts
    └── useFileUpload.ts
```

### 数据模型
```typescript
interface MaterialFormData {
  title: string;
  content: string;
  type: 'text' | 'file';
  categoryId?: string;
  tags: string[];
}

interface MaterialDisplayData extends MaterialFormData {
  id: string;
  accountId: string;
  createdAt: string;
  updatedAt: string;
  fileSize?: number;
  fileName?: string;
  versions: MaterialVersion[];
}

interface MaterialVersion {
  id: string;
  content: string;
  createdAt: string;
  comment?: string;
}
```

## API集成

### 必需的API端点
- `GET /api/materials` - 获取素材列表
- `POST /api/materials` - 创建素材
- `PUT /api/materials/:id` - 更新素材
- `DELETE /api/materials/:id` - 删除素材
- `POST /api/materials/upload` - 上传文件素材
- `GET /api/materials/:id/versions` - 获取版本历史
- `POST /api/materials/:id/versions` - 创建新版本

### 文件处理API
- `POST /api/materials/parse-pdf` - 解析PDF文件
- `POST /api/materials/parse-docx` - 解析Word文件
- `POST /api/materials/parse-txt` - 解析文本文件

## 风险评估

### 技术风险
- **文件解析复杂性**: 使用成熟的文件解析库
- **大文件上传性能**: 实现分片上传和断点续传
- **富文本编辑器兼容性**: 选择稳定可靠的编辑器库

### 缓解措施
- 进行充分的文件格式测试
- 实现文件大小限制和格式验证
- 提供上传失败的重试机制
- 实现本地缓存和离线支持

## 预估工作量
- **设计时间**: 6小时
- **开发时间**: 20小时
- **测试时间**: 6小时
- **总计**: 32小时

## 相关资源
- [React Quill富文本编辑器](https://quilljs.com/)
- [PDF.js PDF解析库](https://mozilla.github.io/pdf.js/)
- [Docx解析库](https://github.com/dolanmiu/docx)
- [React DnD拖拽库](https://react-dnd.github.io/react-dnd/)

## 备注
- 考虑添加素材模板功能
- 预留AI辅助素材处理功能接口
- 实现素材的导入/导出功能
- 添加素材使用统计和分析功能