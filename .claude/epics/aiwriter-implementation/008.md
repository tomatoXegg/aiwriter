---
name: "008-选题整合前端界面"
description: "开发选题整合的前端界面，包括AI选题生成、选题筛选、自定义prompt模板和选题管理功能"
status: "pending"
priority: "high"
assigned_to: ""
labels: ["frontend", "topic-integration", "ai", "ui"]
type: "task"
epic: "aiwriter-implementation"
story_points: 13
created: "2025-09-04T01:26:29Z"
updated: "2025-09-04T01:26:29Z"
due_date: ""
blocked_by: ["001", "002", "003", "006", "007"]
blocking: ["009", "010"]
---

# 任务：选题整合前端界面

## 任务描述

开发选题整合模块的前端界面，实现基于素材的AI选题生成、选题智能筛选、自定义prompt模板管理、选题质量评估等功能，为内容创作提供智能化的选题解决方案。

## 任务目标

- [ ] 创建选题整合主界面
- [ ] 实现AI选题生成功能
- [ ] 开发选题筛选和编辑界面
- [ ] 实现自定义prompt模板系统
- [ ] 添加选题质量评估功能
- [ ] 实现选题管理（选择、丢弃、保存）
- [ ] 添加选题历史记录功能
- [ ] 实现响应式设计

## 详细步骤

### 1. 选题整合主界面
- [ ] 创建选题整合页面组件 (`TopicIntegrationPage`)
- [ ] 设计界面布局：素材选择区 + 生成控制区 + 选题展示区
- [ ] 实现页面路由配置
- [ ] 添加面包屑导航和页面标题

### 2. 素材选择功能
- [ ] 创建素材选择组件 (`MaterialSelector`)
- [ ] 实现素材列表展示
- [ ] 添加素材搜索和筛选功能
- [ ] 实现多选和批量选择
- [ ] 添加素材预览功能

### 3. AI选题生成
- [ ] 创建选题生成组件 (`TopicGenerator`)
- [ ] 实现生成参数设置（数量、风格、难度）
- [ ] 添加生成进度显示
- [ ] 实现实时生成状态更新
- [ ] 添加生成历史记录

### 4. 选题展示组件
- [ ] 创建选题展示组件 (`TopicDisplay`)
- [ ] 实现选题卡片式布局
- [ ] 添加选题快速预览功能
- [ ] 实现选题展开/收起功能
- [ ] 添加选题评分和标签显示

### 5. 选题筛选功能
- [ ] 创建选题筛选组件 (`TopicFilter`)
- [ ] 实现多维度筛选（质量、相关性、难度）
- [ ] 添加关键词搜索功能
- [ ] 实现自定义筛选条件
- [ ] 添加筛选结果统计

### 6. 选题编辑功能
- [ ] 创建选题编辑组件 (`TopicEditor`)
- [ ] 实现选题标题和描述编辑
- [ ] 添加选题关键词调整
- [ ] 实现选题分类管理
- [ ] 添加选题预览功能

### 7. Prompt模板系统
- [ ] 创建模板管理组件 (`PromptTemplateManager`)
- [ ] 实现模板的创建、编辑、删除
- [ ] 添加模板分类和标签
- [ ] 实现模板预览和测试
- [ ] 添加模板分享功能

### 8. 质量评估功能
- [ ] 创建质量评估组件 (`QualityAssessment`)
- [ ] 实现选题质量评分显示
- [ ] 添加评分维度展示（创新性、可行性、相关性）
- [ ] 实现评分详情查看
- [ ] 添加改进建议显示

### 9. 选题管理功能
- [ ] 创建选题管理组件 (`TopicManager`)
- [ ] 实现选题状态管理（待选择、已选择、已丢弃）
- [ ] 添加批量操作功能
- [ ] 实现选题导出功能
- [ ] 添加选题统计分析

### 10. 历史记录功能
- [ ] 创建历史记录组件 (`TopicHistory`)
- [ ] 实现生成历史展示
- [ ] 添加历史记录搜索和筛选
- [ ] 实现历史选题复用功能
- [ ] 添加历史数据分析

## 验收标准

### 功能性验收
- [ ] 可以基于素材成功生成选题
- [ ] 选题筛选功能正常工作
- [ ] 可以编辑和保存选题
- [ ] Prompt模板管理功能完整
- [ ] 质量评估功能准确可靠
- [ ] 选题历史记录功能正常
- [ ] 批量操作功能可用

### 用户体验验收
- [ ] AI生成响应时间 < 30秒
- [ ] 界面操作流畅直观
- [ ] 筛选和搜索功能响应快速
- [ ] 状态反馈及时清晰
- [ ] 移动端体验良好

### 技术性验收
- [ ] AI API调用稳定可靠
- [ ] 状态管理逻辑正确
- [ ] 错误处理完善
- [ ] 组件性能优化良好
- [ ] 单元测试覆盖率 > 80%

## 技术要求

### 前端技术栈
- **框架**: React 18+ with TypeScript
- **状态管理**: Zustand
- **UI组件**: Ant Design
- **样式**: Tailwind CSS
- **AI集成**: Google Gemini API
- **实时更新**: WebSocket或轮询

### 组件结构
```
src/
├── pages/
│   └── TopicIntegrationPage.tsx
├── components/
│   ├── topics/
│   │   ├── MaterialSelector.tsx
│   │   ├── TopicGenerator.tsx
│   │   ├── TopicDisplay.tsx
│   │   ├── TopicFilter.tsx
│   │   ├── TopicEditor.tsx
│   │   ├── PromptTemplateManager.tsx
│   │   ├── QualityAssessment.tsx
│   │   ├── TopicManager.tsx
│   │   └── TopicHistory.tsx
│   └── common/
│       ├── RatingStars.tsx
│       └── TagCloud.tsx
└── hooks/
    ├── useTopicGeneration.ts
    ├── usePromptTemplates.ts
    └── useQualityAssessment.ts
```

### 数据模型
```typescript
interface TopicFormData {
  title: string;
  description: string;
  keywords: string[];
  category?: string;
  difficulty: 'easy' | 'medium' | 'hard';
}

interface TopicDisplayData extends TopicFormData {
  id: string;
  materialId: string;
  prompt: string;
  qualityScore: number;
  relevanceScore: number;
  innovationScore: number;
  status: 'pending' | 'selected' | 'discarded';
  createdAt: string;
  generatedBy: string;
}

interface PromptTemplate {
  id: string;
  name: string;
  template: string;
  category: string;
  tags: string[];
  isPublic: boolean;
  usageCount: number;
  createdAt: string;
}
```

## API集成

### 必需的API端点
- `POST /api/topics/generate` - 生成选题
- `GET /api/topics` - 获取选题列表
- `PUT /api/topics/:id` - 更新选题
- `POST /api/topics/:id/select` - 选择选题
- `POST /api/topics/:id/discard` - 丢弃选题
- `GET /api/topics/history` - 获取历史记录
- `POST /api/templates` - 创建Prompt模板
- `GET /api/templates` - 获取模板列表

### AI集成API
- `POST /api/ai/analyze-material` - 分析素材内容
- `POST /api/ai/generate-topics` - 基于素材生成选题
- `POST /api/ai/assess-quality` - 评估选题质量
- `POST /api/ai/optimize-prompt` - 优化Prompt模板

## 风险评估

### 技术风险
- **AI API响应时间**: 实现异步处理和进度显示
- **生成内容质量**: 实现质量评估和人工审核
- **大量数据处理**: 实现分页和虚拟滚动

### 缓解措施
- 实现API调用重试机制
- 添加本地缓存和离线支持
- 提供生成结果的实时预览
- 实现优雅的错误处理和用户提示

## 预估工作量
- **设计时间**: 8小时
- **开发时间**: 24小时
- **测试时间**: 8小时
- **总计**: 40小时

## 相关资源
- [Google Gemini API文档](https://ai.google.dev/)
- [React实时更新最佳实践](https://react.dev/learn/render-and-commit)
- [Ant Design高级组件](https://ant.design/components/overview/)
- [状态管理最佳实践](https://github.com/pmndrs/zustand)

## 备注
- 考虑添加选题的协同功能
- 预留选题推荐算法优化接口
- 实现选题的批量导出功能
- 添加选题效果追踪和分析功能